---
title: "tidyverse: using forcats to improve your ggplots"
author: "catlin"
date: "10/22/2020"
output:
  word_document: default
  html_document:
    theme: lumen
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(forcats)
```

# Handy forcats functions for ggplot2

### Comparing followers of world religions

Source: https://en.wikipedia.org/wiki/List_of_religious_populations

I was looking for a simple dataset with count data for many items to demonstrate some basic forcats functions that are useful when creating plots.

```{r, message=FALSE}
religions = read_csv("https://raw.githubusercontent.com/acatlin/data/master/religions.csv", col_names = FALSE) %>%
  rename(religion = X1, followers = X2) %>%
  mutate(millions_of_followers = followers/1000000.0) # %>%

head(religions)
```

### Version 1: basic ggplot

Q: What are the most followed religions?

A: Use ggplot to compare religious populations

```{r}
religions %>%
  ggplot(aes(x = religion, 
    y = millions_of_followers)) +
    geom_col(fill = "lightblue") + 
    labs(x = "religion",
         y = "millions of followers", 
      caption = "https://en.wikipedia.org/wiki/List_of_religious_populations") +
    coord_flip()
```

### Version 2: changing sort order

![](https://github.com/acatlin/data/blob/master/before_and_after_1.png?raw=true)

Q: How do we change the chart to show the most followed religions first?

A: Use forcats::fct_reorder()

```{r}
library(forcats)

ggplot(religions, aes(x = fct_reorder(religion, millions_of_followers), y = millions_of_followers)) +
    geom_col(fill = "lightblue") + 
    labs(x = "religion",
         y = "millions of followers", 
      caption = "https://en.wikipedia.org/wiki/List_of_religious_populations") +
    coord_flip()
```
